<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        .result { padding: 10px; margin: 5px 0; border-radius: 4px; }
        .success { background: #4caf50; }
        .error { background: #f44336; }
        .info { background: #2196f3; }
    </style>
</head>
<body>
    <h1>Calendar Component Test</h1>
    <div id="results"></div>

    <script>
        // Define CAMPAIGN_COLORS first
        window.CAMPAIGN_COLORS = {
            'RRB Promotion': 'bg-red-100 text-red-800 border-red-200',
            'Cheese Club': 'bg-orange-100 text-orange-800 border-orange-200',
            'Nurturing/Education': 'bg-green-100 text-green-800 border-green-200',
            'Community/Lifestyle': 'bg-blue-100 text-blue-800 border-blue-200',
            'Re-engagement': 'bg-purple-100 text-purple-800 border-purple-200',
            'SMS Alert': 'bg-yellow-100 text-yellow-800 border-yellow-200',
            'default': 'bg-gray-100 text-gray-800 border-gray-200'
        };
        
        console.log('CAMPAIGN_COLORS defined for calendar components');
        
        window.API_BASE_URL = 'http://localhost:8000';
        
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            results.appendChild(div);
            console.log(message);
        }
        
        function testComponents() {
            addResult('Starting component tests...', 'info');
            
            // Wait for all scripts to load
            setTimeout(() => {
                const components = [
                    'CalendarViewSimple',
                    'CalendarView', 
                    'Calendar',
                    'EventModal',
                    'CalendarViewLocal',
                    'FirebaseCalendarService',
                    'GeminiChatService',
                    'CAMPAIGN_COLORS'
                ];
                
                let loaded = 0;
                let failed = 0;
                
                components.forEach(name => {
                    const type = typeof window[name];
                    if (type === 'function' || (name === 'CAMPAIGN_COLORS' && type === 'object')) {
                        addResult(`‚úÖ ${name}: ${type}`, 'success');
                        loaded++;
                    } else {
                        addResult(`‚ùå ${name}: ${type}`, 'error');
                        failed++;
                    }
                });
                
                if (failed === 0) {
                    addResult(`üéâ SUCCESS: All ${loaded} components loaded!`, 'success');
                } else {
                    addResult(`‚ö†Ô∏è PARTIAL: ${loaded} loaded, ${failed} failed`, 'error');
                }
                
                // Test specific calendar components
                if (typeof window.CalendarView === 'function' && 
                    typeof window.Calendar === 'function' && 
                    typeof window.EventModal === 'function') {
                    addResult('‚úÖ Critical calendar components are functional', 'success');
                } else {
                    addResult('‚ùå Some critical calendar components missing', 'error');
                }
                
            }, 2000);
        }
        
        testComponents();
    </script>

    <!-- Load the same scripts as main app -->
    <script src="/static/dist/component-loader.js"></script>
    <script src="/static/dist/FirebaseCalendarService.js"></script>
    <script src="/static/dist/GeminiChatService.js"></script>
    <script src="/static/dist/CalendarViewSimple.js"></script>
    <script src="/static/dist/CalendarViewLocal.js"></script>
    <script src="/static/dist/Calendar.js"></script>
    <script src="/static/dist/EventModal.js"></script>
    <script src="/static/dist/CalendarView.js"></script>
</body>
</html>